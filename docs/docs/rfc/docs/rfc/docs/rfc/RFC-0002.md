# RFC-0002: Peer Discovery and Handshake

## Status
Draft

## Abstract

This RFC defines how nodes in the Open Financial Network (OFN) discover peers and establish initial communication relationships.

The mechanism is intentionally minimal and does not assume trusted peers.

---

## Peer Discovery

Peer discovery is the process by which a node becomes aware of other nodes.

Discovery MAY occur through:
- Static configuration
- Bootstrap peers
- Manual peer entry
- Out-of-band exchange

The protocol does not mandate a single discovery method.

---

## Peer Handshake

Before message exchange, nodes MUST perform a handshake.

The handshake establishes:
- Node identity awareness
- Willingness to communicate
- Basic liveness confirmation

Handshake does NOT imply trust.

---

## Handshake Steps (Abstract)

1. Node A sends a handshake request containing its `node_id`
2. Node B responds with its own `node_id`
3. Both nodes record each other as peers
4. Message exchange MAY begin

No additional metadata is required at this stage.

---

## Peer State

A peer connection MAY exist in one of the following states:
- Discovered
- Connected
- Disconnected

Peers MAY be removed at any time.

---

## Security Considerations

- Handshake does not authenticate identity
- Replay attacks are possible at this layer
- Higher-layer protections MUST mitigate abuse

This RFC intentionally avoids identity proof mechanisms.

---

## Compatibility

This RFC is compatible with:
- RFC-0001 (Node Identity and Roles)
- Current reference implementation (`src/node.py`)

---

## Future Work

- Cryptographic handshakes
- Peer scoring
- Connection limits
- Abuse mitigation